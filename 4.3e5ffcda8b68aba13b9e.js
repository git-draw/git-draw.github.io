(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{H6VX:function(t,e,r){"use strict";r.r(e),r.d(e,"GitGraphModule",function(){return Rt});var s=r("ofXK"),n=r("tyNb"),i=r("fXoL"),o=r("zaVo");let a=(()=>{class t{constructor(t,e,r){this.componentFactoryResolver=t,this.applicationRef=e,this.injector=r}open(t){console.log("ref: ",t.nativeElement);const e=this.componentFactoryResolver.resolveComponentFactory(t).create(this.injector);this.componentRef=e,this.applicationRef.attachView(e.hostView);const r=e.hostView.rootNodes[0];document.body.appendChild(r);const s=r.getElementsByTagName("app-modal");return s.length&&(s[0].style.display="block"),document.body.classList.add("jw-modal-open"),e}close(){this.applicationRef.detachView(this.componentRef.hostView),this.componentRef.destroy()}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(i.j),i.Qb(i.g),i.Qb(i.s))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h=(()=>{class t{constructor(t){this.el=t,this.activeI=0,this.characterLength=0,this.isTag=!1}ngAfterViewInit(){this.innerHTML=this.el.nativeElement.innerHTML,this.characterLength=this.innerHTML.length,this.typing()}ngOnInit(){}typing(){if(this.activeI===this.characterLength)return;const t=this.innerHTML.slice(0,++this.activeI);this.el.nativeElement.innerHTML=t+"<span class='blinker'>&#32;</span>";const e=t.slice(-1);if("<"===e&&(this.isTag=!0),">"===e&&(this.isTag=!1),this.isTag)return this.typing();setTimeout(this.typing.bind(this),60)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(i.l))},t.\u0275dir=i.Db({type:t,selectors:[["","appTyping",""]]}),t})();const l=[[["","header",""]],[["","content",""]],[["","footer",""]]],c=["[header]","[content]","[footer]"];let u=(()=>{class t{constructor(t){this.modalService=t}ngOnInit(){}close(){this.modalService.close()}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(a))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-modal"]],ngContentSelectors:c,decls:11,vars:0,consts:[[1,"jw-modal"],[1,"jw-modal-body"],[1,"modal-header"],[1,"modal-close",3,"click"],["appTyping","",1,"modal-content"],[1,"modal-footer"],[1,"jw-modal-background"]],template:function(t,e){1&t&&(i.Xb(l),i.Nb(0,"div",0),i.Nb(1,"div",1),i.Nb(2,"div",2),i.Wb(3),i.Nb(4,"div",3),i.Tb("click",function(){return e.close()}),i.dc(5,"\xd7"),i.Mb(),i.Mb(),i.Nb(6,"div",4),i.Wb(7,1),i.Mb(),i.Nb(8,"div",5),i.Wb(9,2),i.Mb(),i.Mb(),i.Mb(),i.Jb(10,"div",6))},directives:[h],styles:[""]}),t})(),d=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Cb({type:t,selectors:[["app-help-modal"]],decls:7,vars:0,consts:[["header",""],["content",""]],template:function(t,e){1&t&&(i.Nb(0,"app-modal"),i.Lb(1,0),i.Nb(2,"h3"),i.dc(3,"Help"),i.Mb(),i.Kb(),i.Lb(4,1),i.Nb(5,"span"),i.dc(6,"Git-Draw tool helps you to draw git branch and commits by using the git commands."),i.Mb(),i.Kb(),i.Mb())},directives:[u],styles:[""]}),t})();var m=r("XNiG");let p=(()=>{class t{constructor(t){this.modalService=t,this.activeBranch="master",this.allBranches=["master"],this.commandHistory=[],this.commandHistoryChange=new m.a}initialize(t){this.gitGraph=Object(o.createGitgraph)(t)}commit(t){this.a=this.gitGraph.branch(this.activeBranch),this.a.commit(t)}processCommand(t){return this.commandHistory.push({type:"input",command:t}),this.commandHistoryChange.next(this.commandHistory),new Promise((e,r)=>{switch(t){case"help":return this.modalService.open(d),e("");case"clear":return this.commandHistory=[],this.commandHistoryChange.next(this.commandHistory),e("");default:return r("Invalid command")}})}}return t.\u0275fac=function(e){return new(e||t)(i.Qb(a))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=r("Cfvw"),f=r("HDdC"),b=r("DH7j"),y=r("lJxs"),_=r("XoHu");function v(t,e){return new f.a(r=>{const s=t.length;if(0===s)return void r.complete();const n=new Array(s);let i=0,o=0;for(let a=0;a<s;a++){const h=Object(g.a)(t[a]);let l=!1;r.add(h.subscribe({next:t=>{l||(l=!0,o++),n[a]=t},error:t=>r.error(t),complete:()=>{i++,i!==s&&l||(o===s&&r.next(e?e.reduce((t,e,r)=>(t[e]=n[r],t),{}):n),r.complete())}}))}})}const C=new i.r("NgValueAccessor"),w={provide:C,useExisting:Object(i.T)(()=>A),multi:!0},O=new i.r("CompositionEventMode");let A=(()=>{class t{constructor(t,e,r){this._renderer=t,this._elementRef=e,this._compositionMode=r,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=Object(s.o)()?Object(s.o)().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(i.E),i.Ib(i.l),i.Ib(O,8))},t.\u0275dir=i.Db({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&i.Tb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[i.xb([w])]}),t})();function V(t){return null==t||0===t.length}function M(t){return null!=t&&"number"==typeof t.length}const E=new i.r("NgValidators"),S=new i.r("NgAsyncValidators"),x=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class k{static min(t){return function(t){return e=>{if(V(e.value)||V(t))return null;const r=parseFloat(e.value);return!isNaN(r)&&r<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(V(e.value)||V(t))return null;const r=parseFloat(e.value);return!isNaN(r)&&r>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return V(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return V(t.value)||x.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>V(e.value)||!M(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>M(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return D;let e,r;return"string"==typeof t?(r="","^"!==t.charAt(0)&&(r+="^"),r+=t,"$"!==t.charAt(t.length-1)&&(r+="$"),e=new RegExp(r)):(r=t.toString(),e=t),t=>{if(V(t.value))return null;const s=t.value;return e.test(s)?null:{pattern:{requiredPattern:r,actualValue:s}}}}(t)}static nullValidator(t){return null}static compose(t){return B(t)}static composeAsync(t){return H(t)}}function D(t){return null}function j(t){return null!=t}function T(t){const e=Object(i.pb)(t)?Object(g.a)(t):t;return Object(i.ob)(e),e}function P(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function N(t,e){return e.map(e=>e(t))}function R(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function B(t){if(!t)return null;const e=t.filter(j);return 0==e.length?null:function(t){return P(N(t,e))}}function F(t){return null!=t?B(R(t)):null}function H(t){if(!t)return null;const e=t.filter(j);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(b.a)(e))return v(e,null);if(Object(_.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return v(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return v(t=1===t.length&&Object(b.a)(t[0])?t[0]:t,null).pipe(Object(y.a)(t=>e(...t)))}return v(t,null)}(N(t,e).map(T)).pipe(Object(y.a)(P))}}function G(t){return null!=t?H(R(t)):null}function U(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function I(t){return t._rawValidators}function z(t){return t._rawAsyncValidators}let L=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=F(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=G(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Db({type:t}),t})(),$=(()=>{class t extends L{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return W(e||t)},t.\u0275dir=i.Db({type:t,features:[i.vb]}),t})();const W=i.Ob($);class X extends L{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class J{constructor(t){this._cd=t}is(t){var e,r;return!!(null===(r=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===r?void 0:r[t])}}let Q=(()=>{class t extends J{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(X,2))},t.\u0275dir=i.Db({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&i.Ab("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[i.vb]}),t})(),Y=(()=>{class t extends J{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib($,10))},t.\u0275dir=i.Db({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&i.Ab("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[i.vb]}),t})();function K(t,e){tt(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(r=>{t._pendingValue=r,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&rt(t,e)})}(t,e),function(t,e){const r=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};t.registerOnChange(r),e._registerOnDestroy(()=>{t._unregisterOnChange(r)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&rt(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const r=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(r),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(r)})}}(t,e)}function q(t,e,r=!0){const s=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(s),e.valueAccessor.registerOnTouched(s)),et(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Z(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function tt(t,e,r){const s=I(t);null!==e.validator?t.setValidators(U(s,e.validator)):"function"==typeof s&&t.setValidators([s]);const n=z(t);if(null!==e.asyncValidator?t.setAsyncValidators(U(n,e.asyncValidator)):"function"==typeof n&&t.setAsyncValidators([n]),r){const r=()=>t.updateValueAndValidity();Z(e._rawValidators,r),Z(e._rawAsyncValidators,r)}}function et(t,e,r){let s=!1;if(null!==t){if(null!==e.validator){const r=I(t);if(Array.isArray(r)&&r.length>0){const n=r.filter(t=>t!==e.validator);n.length!==r.length&&(s=!0,t.setValidators(n))}}if(null!==e.asyncValidator){const r=z(t);if(Array.isArray(r)&&r.length>0){const n=r.filter(t=>t!==e.asyncValidator);n.length!==r.length&&(s=!0,t.setAsyncValidators(n))}}}if(r){const t=()=>{};Z(e._rawValidators,t),Z(e._rawAsyncValidators,t)}return s}function rt(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function st(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const nt="VALID",it="INVALID",ot="PENDING",at="DISABLED";function ht(t){return(dt(t)?t.validators:t)||null}function lt(t){return Array.isArray(t)?F(t):t||null}function ct(t,e){return(dt(e)?e.asyncValidators:t)||null}function ut(t){return Array.isArray(t)?G(t):t||null}function dt(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class mt{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=lt(this._rawValidators),this._composedAsyncValidatorFn=ut(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===nt}get invalid(){return this.status===it}get pending(){return this.status==ot}get disabled(){return this.status===at}get enabled(){return this.status!==at}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=lt(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ut(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ot,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=at,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=nt,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==nt&&this.status!==ot||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?at:nt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ot,this._hasOwnPendingAsyncValidator=!0;const e=T(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,r){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let s=t;return e.forEach(t=>{s=s instanceof gt?s.controls.hasOwnProperty(t)?s.controls[t]:null:s instanceof ft&&s.at(t)||null}),s}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new i.n,this.statusChanges=new i.n}_calculateStatus(){return this._allControlsDisabled()?at:this.errors?it:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ot)?ot:this._anyControlsHaveStatus(it)?it:nt}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){dt(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class pt extends mt{constructor(t=null,e,r){super(ht(e),ct(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!r})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){st(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){st(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class gt extends mt{constructor(t,e,r){super(ht(e),ct(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!r})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,s)=>{r.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof pt?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((t,s)=>{r=e(r,t,s)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class ft extends mt{constructor(t,e,r){super(ht(e),ct(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!r})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,r)=>{this._throwIfControlMissing(r),this.at(r).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,r)=>{this.at(r)&&this.at(r).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,s)=>{r.reset(t[s],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof pt?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let bt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=i.Db({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),yt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({}),t})();const _t=new i.r("NgModelWithFormControlWarning"),vt={provide:$,useExisting:Object(i.T)(()=>Ct)};let Ct=(()=>{class t extends ${constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new i.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(et(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return K(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){q(t.control||null,t,!1),st(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,r=this.form.get(t.path);e!==r&&(q(e||null,t),r instanceof pt&&(K(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){tt(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return et(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){tt(this.form,this,!1),this._oldForm&&et(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(E,10),i.Ib(S,10))},t.\u0275dir=i.Db({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&i.Tb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[i.xb([vt]),i.vb,i.wb]}),t})();const wt={provide:X,useExisting:Object(i.T)(()=>Ot)};let Ot=(()=>{class t extends X{constructor(t,e,r,s,n){super(),this._ngModelWarningConfig=n,this._added=!1,this.update=new i.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(r),this.valueAccessor=function(t,e){if(!e)return null;let r,s,n;return Array.isArray(e),e.forEach(t=>{t.constructor===A?r=t:Object.getPrototypeOf(t.constructor)===class{}?s=t:n=t}),n||s||r||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const r=t.model;return!!r.isFirstChange()||!Object.is(e,r.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(i.Ib($,13),i.Ib(E,10),i.Ib(S,10),i.Ib(C,10),i.Ib(_t,8))},t.\u0275dir=i.Db({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[i.xb([wt]),i.vb,i.wb]}),t._ngModelWarningSentOnce=!1,t})(),At=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({imports:[[yt]]}),t})(),Vt=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:_t,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({imports:[At]}),t})(),Mt=(()=>{class t{group(t,e=null){const r=this._reduceControls(t);let s,n=null,i=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(n=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,s=null!=e.updateOn?e.updateOn:void 0):(n=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new gt(r,{asyncValidators:i,updateOn:s,validators:n})}control(t,e,r){return new pt(t,e,r)}array(t,e,r){const s=t.map(t=>this._createControl(t));return new ft(s,e,r)}_reduceControls(t){const e={};return Object.keys(t).forEach(r=>{e[r]=this._createControl(t[r])}),e}_createControl(t){return t instanceof pt||t instanceof gt||t instanceof ft?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(i.Eb)({factory:function(){return new t},token:t,providedIn:Vt}),t})();function Et(t,e){1&t&&(i.Nb(0,"div",17),i.Nb(1,"span"),i.dc(2,"We make it simple and seamless for you to draw git branches and commits by simply running the git commands."),i.Mb(),i.Jb(3,"br"),i.Jb(4,"br"),i.Nb(5,"span"),i.dc(6,"Use below commands"),i.Mb(),i.Jb(7,"br"),i.Nb(8,"span"),i.dc(9,"============="),i.Mb(),i.Jb(10,"br"),i.Nb(11,"span"),i.dc(12,"$ help"),i.Mb(),i.Mb())}function St(t,e){if(1&t&&(i.Nb(0,"div",20),i.dc(1),i.Mb()),2&t){const t=e.$implicit;i.Ab("output","output"===t.type),i.yb(1),i.fc(" ",t.command," ")}}function xt(t,e){if(1&t&&(i.Nb(0,"div",18),i.cc(1,St,2,3,"div",19),i.Mb()),2&t){const t=i.Vb();i.yb(1),i.Yb("ngForOf",t.history)}}let kt=(()=>{class t{constructor(t,e){this.fb=t,this.modalService=e,this.history=[],this.commandOutput=new i.n,this.toggled=!1,this.commandHistory=[],this.activeBranch="master",this.form=this.fb.group({command:["",[k.required]]})}ngOnInit(){this.history.length||this.toggle()}toggle(){this.toggled=!this.toggled}submit(){if(this.form.invalid)return!1;this.commandOutput.emit(this.form.value.command),this.form.reset()}processCommand(t){switch(t){case"help":console.log("opening modal"),this.modalService.open(d);break;case"clear":console.log("clearing command history"),this.commandHistory=[]}}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(Mt),i.Ib(a))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-chat-pop"]],inputs:{history:"history"},outputs:{commandOutput:"commandOutput"},decls:23,vars:10,consts:[[1,"fabs"],[1,"chat"],[1,"chat_header"],["id","chat_head"],[1,"system-name"],[1,"agent"],[1,"branch-name"],["class","chat_body chat_login","appTyping","",4,"ngIf"],["id","chat_converse","class","chat_conversion chat_converse",4,"ngIf"],[1,"fab_field"],[1,"command-input-prefix"],[1,"d-inline",3,"formGroup","submit"],["type","submit","id","fab_send",1,"fab","btn-send"],[1,"zmdi","zmdi-mail-send"],["formControlName","command","placeholder","Command",1,"chat_field","chat_message","command-input"],["id","prime",1,"fab",3,"click"],[1,"prime","zmdi"],["appTyping","",1,"chat_body","chat_login"],["id","chat_converse",1,"chat_conversion","chat_converse"],["class","chat_msg_item chat_msg_item_admin",3,"output",4,"ngFor","ngForOf"],[1,"chat_msg_item","chat_msg_item_admin"]],template:function(t,e){1&t&&(i.Nb(0,"div",0),i.Nb(1,"div",1),i.Nb(2,"div",2),i.Nb(3,"div",3),i.Nb(4,"span",4),i.dc(5,"user@git-draw:~/home"),i.Mb(),i.Jb(6,"br"),i.Nb(7,"span",5),i.dc(8," git:("),i.Nb(9,"span",6),i.dc(10),i.Mb(),i.dc(11,") "),i.Mb(),i.Mb(),i.Mb(),i.cc(12,Et,13,0,"div",7),i.cc(13,xt,2,1,"div",8),i.Nb(14,"div",9),i.Nb(15,"span",10),i.dc(16,">"),i.Mb(),i.Nb(17,"form",11),i.Tb("submit",function(){return e.submit()}),i.Nb(18,"button",12),i.Jb(19,"i",13),i.Mb(),i.Jb(20,"input",14),i.Mb(),i.Mb(),i.Mb(),i.Nb(21,"a",15),i.Tb("click",function(){return e.toggle()}),i.Jb(22,"i",16),i.Mb(),i.Mb()),2&t&&(i.yb(1),i.Ab("is-visible",e.toggled),i.yb(9),i.ec(e.activeBranch),i.yb(2),i.Yb("ngIf",!e.history.length),i.yb(1),i.Yb("ngIf",e.history.length),i.yb(4),i.Yb("formGroup",e.form),i.yb(5),i.Ab("zmdi-code",!e.toggled)("zmdi-close",e.toggled))},directives:[s.i,bt,Y,Ct,A,Q,Ot,h,s.h],styles:[""]}),t})();const Dt=[{path:"",component:(()=>{class t{constructor(t){this.gitGraphService=t,this.history=[],this.gitGraphService.commandHistoryChange.subscribe(t=>{this.history=t})}ngOnInit(){const t=document.getElementById("git-graph");this.gitGraphService.initialize(t)}onCommandOutput(t){this.gitGraphService.processCommand(t).then(t=>{console.log("Response: ",t)}).catch(t=>{console.log("Error: ",t)}),console.log("command received: ",t)}}return t.\u0275fac=function(e){return new(e||t)(i.Ib(p))},t.\u0275cmp=i.Cb({type:t,selectors:[["app-graph-container"]],decls:2,vars:1,consts:[["id","git-graph"],[3,"history","commandOutput"]],template:function(t,e){1&t&&(i.Jb(0,"div",0),i.Nb(1,"app-chat-pop",1),i.Tb("commandOutput",function(t){return e.onCommandOutput(t)}),i.Mb()),2&t&&(i.yb(1),i.Yb("history",e.history))},directives:[kt],styles:[""]}),t})()}];let jt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({imports:[[n.a.forChild(Dt)]]}),t})(),Tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({imports:[[s.b]]}),t})(),Pt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({imports:[[s.b,Tt]]}),t})(),Nt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({imports:[[s.b,Pt,Tt,Vt]]}),t})(),Rt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=i.Gb({type:t}),t.\u0275inj=i.Fb({imports:[[s.b,jt,Vt,Nt]]}),t})()},zaVo:function(t,e,r){!function(t){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t,e){return t(e={exports:{}},e.exports),e.exports}var n=s(function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=e.Orientation||(e.Orientation={})).VerticalReverse="vertical-reverse",r.Horizontal="horizontal",r.HorizontalReverse="horizontal-reverse"});r(n);var i=s(function(t,e){function r(t,e){return Object.assign({},e.reduce((e,r)=>Object.assign({},e,{[r]:t[r]}),{}))}function s(t){return void 0===t}Object.defineProperty(e,"__esModule",{value:!0}),e.booleanOptionOr=function(t,e){return"boolean"==typeof t?t:e},e.numberOptionOr=function(t,e){return"number"==typeof t?t:e},e.pick=r,e.debug=function(t,e){console.log(JSON.stringify(t.map(t=>r(t,e)),null,2))},e.isUndefined=s,e.withoutUndefinedKeys=function(t={}){return Object.keys(t).reduce((e,r)=>s(t[r])?e:Object.assign({},e,{[r]:t[r]}),{})},e.arrowSvgPath=function(t,e,r){const s=t.template.arrow.size,i=r.style.dot.size+t.template.arrow.offset,o=Math.PI/7,a=function(t,e,r){const s=e.x-r.x,i=e.y-r.y,o=t.template.commit.spacing;let a,h;switch(t.orientation){case n.Orientation.Horizontal:a=i,h=-o;break;case n.Orientation.HorizontalReverse:a=i,h=o;break;case n.Orientation.VerticalReverse:a=-o,h=s;break;default:a=o,h=s}return t.isVertical?Math.abs(i)>o&&(h=0):Math.abs(s)>o&&(a=0),t.reverseArrow&&(a*=-1,h*=-1),Math.atan2(a,h)}(t,e,r),h=i*Math.cos(a),l=i*Math.sin(a),c=(i+s)*Math.cos(a-o),u=(i+s)*Math.sin(a-o),d=(i+s/2)*Math.cos(a),m=(i+s/2)*Math.sin(a),p=(i+s)*Math.cos(a+o),g=(i+s)*Math.sin(a+o);return`M${h},${l} L${c},${u} Q${d},${m} ${p},${g} L${p},${g}`}});r(i);var o=s(function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Bezier="bezier",t.Straight="straight"}(r||(r={})),e.MergeStyle=r,e.DEFAULT_FONT="normal 12pt Calibri";class s{constructor(t){t.branch=t.branch||{},t.branch.label=t.branch.label||{},t.arrow=t.arrow||{},t.commit=t.commit||{},t.commit.dot=t.commit.dot||{},t.commit.message=t.commit.message||{},this.colors=t.colors||["#000000"],this.branch={color:t.branch.color,lineWidth:t.branch.lineWidth||2,mergeStyle:t.branch.mergeStyle||r.Bezier,spacing:i.numberOptionOr(t.branch.spacing,20),label:{display:i.booleanOptionOr(t.branch.label.display,!0),color:t.branch.label.color||t.commit.color,strokeColor:t.branch.label.strokeColor||t.commit.color,bgColor:t.branch.label.bgColor||"white",font:t.branch.label.font||t.commit.message.font||e.DEFAULT_FONT,borderRadius:i.numberOptionOr(t.branch.label.borderRadius,10)}},this.arrow={size:t.arrow.size||null,color:t.arrow.color||null,offset:t.arrow.offset||2},this.commit={color:t.commit.color,spacing:i.numberOptionOr(t.commit.spacing,25),hasTooltipInCompactMode:i.booleanOptionOr(t.commit.hasTooltipInCompactMode,!0),dot:{color:t.commit.dot.color||t.commit.color,size:t.commit.dot.size||3,strokeWidth:i.numberOptionOr(t.commit.dot.strokeWidth,0),strokeColor:t.commit.dot.strokeColor,font:t.commit.dot.font||t.commit.message.font||"normal 10pt Calibri"},message:{display:i.booleanOptionOr(t.commit.message.display,!0),displayAuthor:i.booleanOptionOr(t.commit.message.displayAuthor,!0),displayHash:i.booleanOptionOr(t.commit.message.displayHash,!0),color:t.commit.message.color||t.commit.color,font:t.commit.message.font||e.DEFAULT_FONT}},this.tag=t.tag||{}}}e.Template=s;const n=new s({colors:["#6963FF","#47E8D4","#6BDB52","#E84BA5","#FFA657"],branch:{color:"#000000",lineWidth:4,spacing:50,mergeStyle:r.Straight},commit:{spacing:60,dot:{size:16,strokeColor:"#000000",strokeWidth:4},message:{color:"black"}},arrow:{size:16,offset:-1.5}});e.blackArrowTemplate=n;const o=new s({colors:["#979797","#008fb5","#f1c109"],branch:{lineWidth:10,spacing:50},commit:{spacing:80,dot:{size:14},message:{font:"normal 14pt Arial"}}});var a;function h(t){return t?"string"==typeof t?{[a.BlackArrow]:n,[a.Metro]:o}[t]:t:o}e.metroTemplate=o,function(t){t.Metro="metro",t.BlackArrow="blackarrow"}(a||(a={})),e.TemplateName=a,e.templateExtend=function(t,e){const r=h(t);return e.branch||(e.branch={}),e.commit||(e.commit={}),{colors:e.colors||r.colors,arrow:Object.assign({},r.arrow,e.arrow),branch:Object.assign({},r.branch,e.branch,{label:Object.assign({},r.branch.label,e.branch.label)}),commit:Object.assign({},r.commit,e.commit,{dot:Object.assign({},r.commit.dot,e.commit.dot),message:Object.assign({},r.commit.message,e.commit.message)}),tag:Object.assign({},r.tag,e.tag)}},e.getTemplate=h});r(o);var a=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=class{constructor(t,e,r,s){this.name=t,this.tagStyle=e,this.commitStyle=s,this.render=r}get style(){return{strokeColor:this.tagStyle.strokeColor||this.commitStyle.color,bgColor:this.tagStyle.bgColor||this.commitStyle.color,color:this.tagStyle.color||"white",font:this.tagStyle.font||this.commitStyle.message.font||o.DEFAULT_FONT,borderRadius:i.numberOptionOr(this.tagStyle.borderRadius,10),pointerWidth:i.numberOptionOr(this.tagStyle.pointerWidth,12)}}}});r(a);var h=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t){let e,r;this.refs=[],this.x=0,this.y=0;try{[,e,r]=t.author.match(/(.*) <(.*)>/)}catch(s){[e,r]=[t.author,""]}this.author={name:e,email:r,timestamp:Date.now()},this.committer={name:e,email:r,timestamp:Date.now()},this.subject=t.subject,this.body=t.body||"",this.hash=t.hash||(Math.random().toString(16).substring(3)+Math.random().toString(16).substring(3)+Math.random().toString(16).substring(3)+Math.random().toString(16).substring(3)).substring(0,40),this.hashAbbrev=this.hash.substring(0,7),this.parents=t.parents?t.parents:[],this.parentsAbbrev=this.parents.map(t=>t.substring(0,7)),this.style=Object.assign({},t.style,{message:Object.assign({},t.style.message),dot:Object.assign({},t.style.dot)}),this.dotText=t.dotText,this.onClick=()=>t.onClick?t.onClick(this):void 0,this.onMessageClick=()=>t.onMessageClick?t.onMessageClick(this):void 0,this.onMouseOver=()=>t.onMouseOver?t.onMouseOver(this):void 0,this.onMouseOut=()=>t.onMouseOut?t.onMouseOut(this):void 0,this.renderDot=t.renderDot,this.renderMessage=t.renderMessage,this.renderTooltip=t.renderTooltip}get message(){let t="";return this.style.message.displayHash&&(t+=`${this.hashAbbrev} `),t+=this.subject,this.style.message.displayAuthor&&(t+=` - ${this.author.name} <${this.author.email}>`),t}get branchToDisplay(){return this.branches?this.branches[0]:""}setRefs(t){return this.refs=t.getNames(this.hash),this}setTags(t,e,r){return this.tags=t.getNames(this.hash).map(t=>new a.Tag(t,e(t),r(t),this.style)),this}setBranches(t){return this.branches=t,this}setPosition({x:t,y:e}){return this.x=t,this.y=e,this}withDefaultColor(t){const e=Object.assign({},this.style,{dot:Object.assign({},this.style.dot),message:Object.assign({},this.style.message)});e.color||(e.color=t),e.dot.color||(e.dot.color=t),e.message.color||(e.message.color=t);const r=this.cloneCommit();return r.style=e,r}cloneCommit(){const t=new r({author:`${this.author.name} <${this.author.email}>`,subject:this.subject,style:this.style,body:this.body,hash:this.hash,parents:this.parents,dotText:this.dotText,onClick:this.onClick,onMessageClick:this.onMessageClick,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,renderDot:this.renderDot,renderMessage:this.renderMessage,renderTooltip:this.renderTooltip});return t.refs=this.refs,t.branches=this.branches,t.tags=this.tags,t.x=this.x,t.y=this.y,t}}e.Commit=r});r(h);var l=s(function(t,r){var s=e&&e.__rest||function(t,e){var r={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(r[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(r[s[n]]=t[s[n]])}return r};Object.defineProperty(r,"__esModule",{value:!0});class n{constructor(t,e,r){this._branch=t,this.name=t.name,this._graph=e,this._onGraphUpdate=r}branch(t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot branch from the deleted branch "${this.name}"`);const e="string"==typeof t?{name:t}:t;return e.from=this,this._graph.createBranch(e).getUserApi()}commit(t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot commit on the deleted branch "${this.name}"`);return"string"==typeof t&&(t={subject:t}),t||(t={}),this._commitWithParents(t,[]),this._onGraphUpdate(),this}delete(){if(this._graph.refs.getCommit("HEAD")===this._graph.refs.getCommit(this.name))throw new Error(`Cannot delete the checked out branch "${this.name}"`);return[...function*(t,e){const r=(t,e)=>t.commits.find(({hash:t})=>t===e);let s=r(t,t.refs.getCommit(e.name));for(;s&&s.hash!==e.parentCommitHash;)yield s,s=r(t,s.parents[0])}(this._graph,this._branch)].forEach(t=>{t.refs=t.refs.filter(t=>t!==this.name)}),this._graph.refs.delete(this.name),this._graph.branches.delete(this.name),this._branch=c.createDeletedBranch(this._graph,this._branch.style,()=>{}),this._onGraphUpdate(),this}merge(...t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot merge to the deleted branch "${this.name}"`);let e=t[0];(function(t){return"object"==typeof t&&!(t instanceof n)})(e)||(e={branch:t[0],fastForward:!1,commitOptions:{subject:t[1]}});const{branch:r,fastForward:s,commitOptions:i}=e,o="string"==typeof r?r:r.name,a=this._graph.refs.getCommit(o);if(!a)throw new Error(`The branch called "${o}" is unknown`);let h=!1;if(s){const t=this._graph.refs.getCommit(this._branch.name);t&&(h=this._areCommitsConnected(t,a))}return s&&h?this._fastForwardTo(a):this._commitWithParents(Object.assign({},i,{subject:i&&i.subject||`Merge branch ${o}`}),[a]),this._onGraphUpdate(),this}tag(t){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot tag on the deleted branch "${this.name}"`);return"string"==typeof t?this._graph.getUserApi().tag({name:t,ref:this._branch.name}):this._graph.getUserApi().tag(Object.assign({},t,{ref:this._branch.name})),this}checkout(){if(this._branch.isDeleted()&&!this._isReferenced())throw new Error(`Cannot checkout the deleted branch "${this.name}"`);const t=this._branch,e=this._graph.refs.getCommit(t.name);return this._graph.currentBranch=t,e&&this._graph.refs.set("HEAD",e),this}_commitWithParents(t,e){const r=this._graph.refs.getCommit(this._branch.name);r?e.unshift(r):this._branch.parentCommitHash&&e.unshift(this._branch.parentCommitHash);const{tag:n}=t,i=s(t,["tag"]),o=new h.Commit(Object.assign({hash:this._graph.generateCommitHash(),author:this._branch.commitDefaultOptions.author||this._graph.author,subject:this._branch.commitDefaultOptions.subject||this._graph.commitMessage},i,{parents:e,style:this._getCommitStyle(t.style)}));r?this._graph.refs.getNames(r).forEach(t=>this._graph.refs.set(t,o.hash)):this._graph.refs.set(this._branch.name,o.hash),this._graph.commits.push(o),this.checkout(),n&&this.tag(n)}_areCommitsConnected(t,e){const r=this._graph.commits.find(({hash:t})=>e===t);return!!r&&!(0===r.parents.length)&&(!!r.parents.includes(t)||r.parents.some(e=>this._areCommitsConnected(t,e)))}_fastForwardTo(t){this._graph.refs.set(this._branch.name,t)}_getCommitStyle(t={}){return Object.assign({},i.withoutUndefinedKeys(this._graph.template.commit),i.withoutUndefinedKeys(this._branch.commitDefaultOptions.style),t,{message:Object.assign({},i.withoutUndefinedKeys(this._graph.template.commit.message),i.withoutUndefinedKeys(this._branch.commitDefaultOptions.style.message),t.message,i.withoutUndefinedKeys({display:this._graph.shouldDisplayCommitMessage&&void 0})),dot:Object.assign({},i.withoutUndefinedKeys(this._graph.template.commit.dot),i.withoutUndefinedKeys(this._branch.commitDefaultOptions.style.dot),t.dot)})}_isReferenced(){return this._graph.branches.has(this.name)||this._graph.refs.hasName(this.name)||this._graph.commits.reduce((t,{refs:e})=>[...t,...e],[]).includes(this.name)}}r.BranchUserApi=n});r(l);var c=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DELETED_BRANCH_NAME="";class r{constructor(t){this.gitgraph=t.gitgraph,this.name=t.name,this.style=t.style,this.parentCommitHash=t.parentCommitHash,this.commitDefaultOptions=t.commitDefaultOptions||{style:{}},this.onGraphUpdate=t.onGraphUpdate,this.renderLabel=t.renderLabel}getUserApi(){return new l.BranchUserApi(this,this.gitgraph,this.onGraphUpdate)}isDeleted(){return""===this.name}}e.Branch=r,e.createDeletedBranch=function(t,e,s){return new r({name:"",gitgraph:t,style:e,onGraphUpdate:s})}});r(c);var u=s(function(t,e){var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Compact="compact"}(r||(r={})),e.Mode=r});r(u);var d=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RegularGraphRows=class{constructor(t){this.rows=new Map,this.maxRowCache=void 0,this.computeRowsFromCommits(t)}getRowOf(t){return this.rows.get(t)||0}getMaxRow(){return void 0===this.maxRowCache&&(this.maxRowCache=function(t){const e=new Set;return t.forEach(t=>e.add(t)),Array.from(e)}(Array.from(this.rows.values())).length-1),this.maxRowCache}computeRowsFromCommits(t){t.forEach((t,e)=>{this.rows.set(t.hash,e)}),this.maxRowCache=void 0}}});r(d);var m=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.CompactGraphRows=class extends d.RegularGraphRows{computeRowsFromCommits(t){t.forEach((e,r)=>{let s=r;if(0!==r){const n=this.getRowOf(e.parents[0]);s=Math.max(n+1,this.getRowOf(t[r-1].hash)),e.parents.length>1&&n<this.getRowOf(e.parents[1])&&s++}this.rows.set(e.hash,s)})}}});r(m);var p=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GraphRows=d.RegularGraphRows,e.createGraphRows=function(t,e){return t===u.Mode.Compact?new m.CompactGraphRows(e):new d.RegularGraphRows(e)}});r(p);var g=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.BranchesOrder=class{constructor(t,e,r){this.branches=new Set,this.colors=e,t.forEach(t=>this.branches.add(t.branchToDisplay)),r&&(this.branches=new Set(Array.from(this.branches).sort(r)))}get(t){return Array.from(this.branches).findIndex(e=>e===t)}getColorOf(t){return this.colors[this.get(t)%this.colors.length]}}});r(g);var f=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Refs=class{constructor(){this.commitPerName=new Map,this.namesPerCommit=new Map}set(t,e){const r=this.commitPerName.get(t);return r&&this.removeNameFrom(r,t),this.addNameTo(e,t),this.addCommitTo(t,e),this}delete(t){return this.hasName(t)&&(this.removeNameFrom(this.getCommit(t),t),this.commitPerName.delete(t)),this}getCommit(t){return this.commitPerName.get(t)}getNames(t){return this.namesPerCommit.get(t)||[]}getAllNames(){return Array.from(this.commitPerName.keys())}hasCommit(t){return this.namesPerCommit.has(t)}hasName(t){return this.commitPerName.has(t)}removeNameFrom(t,e){const r=this.namesPerCommit.get(t)||[];this.namesPerCommit.set(t,r.filter(t=>t!==e))}addNameTo(t,e){const r=this.namesPerCommit.get(t)||[];this.namesPerCommit.set(t,[...r,e])}addCommitTo(t,e){this.commitPerName.set(t,e)}}});r(f);var b=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.BranchesPathsCalculator=class{constructor(t,e,r,s,n,i){this.branchesPaths=new Map,this.commits=t,this.branches=e,this.commitSpacing=r,this.isGraphVertical=s,this.isGraphReverse=n,this.createDeletedBranch=i}execute(){return this.fromCommits(),this.withMergeCommits(),this.smoothBranchesPaths()}fromCommits(){this.commits.forEach(t=>{let e=this.branches.get(t.branchToDisplay);e||(e=this.getDeletedBranchInPath()||this.createDeletedBranch());const r=[],s=this.branchesPaths.get(e),n=this.commits.find(({hash:e})=>e===t.parents[0]);s?r.push(...s):n&&r.push({x:n.x,y:n.y}),r.push({x:t.x,y:t.y}),this.branchesPaths.set(e,r)})}withMergeCommits(){this.commits.filter(({parents:t})=>t.length>1).forEach(t=>{const e=this.commits.find(({hash:e})=>e===t.parents[1]);if(!e)return;let r=this.branches.get(e.branches?e.branches[0]:"");if(!r&&(r=this.getDeletedBranchInPath(),!r))return;const s=[...this.branchesPaths.get(r)||[]];this.branchesPaths.set(r,[...s,{x:t.x,y:t.y,mergeCommit:!0}])})}getDeletedBranchInPath(){return Array.from(this.branchesPaths.keys()).find(t=>t.isDeleted())}smoothBranchesPaths(){const t=new Map;return this.branchesPaths.forEach((e,r)=>{if(e.length<=1)return void t.set(r,[e]);e=e.sort(this.isGraphVertical?(t,e)=>t.y>e.y?-1:1:(t,e)=>t.x>e.x?1:-1),this.isGraphReverse&&(e=e.reverse());const s=e.reduce((t,r,s)=>{if(r.mergeCommit){t[t.length-1].push(i.pick(r,["x","y"]));let n=s-1,o=e[n];for(;n>=0&&o.mergeCommit;)n--,o=e[n];n>=0&&t.push([o])}else t[t.length-1].push(r);return t},[[]]);this.isGraphReverse&&s.forEach(t=>t.reverse()),s.forEach(this.isGraphVertical?e=>{if(e.length<=1)return;const s=e[0],n=e[e.length-1],i=e[1].x,o=Math.round(Math.abs(s.y-n.y)/this.commitSpacing)-1,a=o>0?new Array(o).fill(0).map((t,r)=>({x:i,y:e[0].y-this.commitSpacing*(r+1)})):[],h=t.get(r)||[];t.set(r,[...h,[s,...a,n]])}:e=>{if(e.length<=1)return;const s=e[0],n=e[e.length-1],i=e[1].y,o=Math.round(Math.abs(s.x-n.x)/this.commitSpacing)-1,a=o>0?new Array(o).fill(0).map((t,r)=>({y:i,x:e[0].x+this.commitSpacing*(r+1)})):[],h=t.get(r)||[];t.set(r,[...h,[s,...a,n]])})}),t}},e.toSvgPath=function(t,e,r){return t.map(t=>"M"+t.map(({x:t,y:s},n,i)=>{if(e&&i.length>1&&(1===n||n===i.length-1)){const e=i[n-1];if(r){const r=(e.y+s)/2;return`C ${e.x} ${r} ${t} ${r} ${t} ${s}`}{const r=(e.x+t)/2;return`C ${r} ${e.y} ${r} ${s} ${t} ${s}`}}return`L ${t} ${s}`}).join(" ").slice(1)).join(" ")}});r(b);var y=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GitgraphUserApi=class{constructor(t,e){this._graph=t,this._onGraphUpdate=e}clear(){return this._graph.refs=new f.Refs,this._graph.tags=new f.Refs,this._graph.commits=[],this._graph.branches=new Map,this._graph.currentBranch=this._graph.createBranch("master"),this._onGraphUpdate(),this}commit(t){return this._graph.currentBranch.getUserApi().commit(t),this}branch(t){return this._graph.createBranch(t).getUserApi()}tag(...t){let e,r,s,n,i;if("string"==typeof t[0]?(e=t[0],r=t[1]):(e=t[0].name,r=t[0].ref,s=t[0].style,n=t[0].render),!r){const t=this._graph.refs.getCommit("HEAD");if(!t)return this;r=t}if(this._graph.refs.hasCommit(r)&&(i=r),this._graph.refs.hasName(r)&&(i=this._graph.refs.getCommit(r)),!i)throw new Error(`The ref "${r}" does not exist`);return this._graph.tags.set(e,i),this._graph.tagStyles[e]=s,this._graph.tagRenders[e]=n,this._onGraphUpdate(),this}import(t){const e=new Error("Only `git2json` format is supported for imported data.");if(!Array.isArray(t))throw e;if(!t.every(t=>"object"==typeof t&&"object"==typeof t.author&&Array.isArray(t.refs)))throw e;const r=t.map(t=>Object.assign({},t,{style:Object.assign({},this._graph.template.commit,{message:Object.assign({},this._graph.template.commit.message,{display:this._graph.shouldDisplayCommitMessage})}),author:`${t.author.name} <${t.author.email}>`})).reverse();this.clear(),this._graph.commits=r.map(t=>new h.Commit(t)),r.forEach(({refs:t,hash:e})=>{if(!t)return;if(!e)return;const r="tag: ";t.map(t=>t.split(r)).map(([t,e])=>e).filter(t=>"string"==typeof t).forEach(t=>this._graph.tags.set(t,e)),t.filter(t=>!t.startsWith(r)).forEach(t=>this._graph.refs.set(t,e))});const s=this._getBranches();return this._graph.commits.map(t=>this._withBranches(s,t)).reduce((t,e)=>e.branches?(e.branches.forEach(e=>t.add(e)),t):t,new Set).forEach(t=>this.branch(t)),this._onGraphUpdate(),this}_withBranches(t,e){let r=Array.from((t.get(e.hash)||new Set).values());return 0===r.length&&(r=[c.DELETED_BRANCH_NAME]),e.setBranches(r)}_getBranches(){const t=new Map,e=[];return this._graph.refs.getAllNames().filter(t=>"HEAD"!==t).forEach(r=>{const s=this._graph.refs.getCommit(r);for(s&&e.push(s);e.length>0;){const s=e.pop(),n=this._graph.commits.find(({hash:t})=>t===s),i=t.get(s)||new Set;i.add(r),t.set(s,i),n&&n.parents&&n.parents.length>0&&e.push(n.parents[0])}}),t}}});r(y);var _=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GitgraphCore=class{constructor(t={}){this.refs=new f.Refs,this.tags=new f.Refs,this.tagStyles={},this.tagRenders={},this.commits=[],this.branches=new Map,this.listeners=[],this.nextTimeoutId=null,this.template=o.getTemplate(t.template),this.currentBranch=this.createBranch("master"),this.orientation=t.orientation,this.reverseArrow=i.booleanOptionOr(t.reverseArrow,!1),this.initCommitOffsetX=i.numberOptionOr(t.initCommitOffsetX,0),this.initCommitOffsetY=i.numberOptionOr(t.initCommitOffsetY,0),this.mode=t.mode,this.author=t.author||"Sergio Flores <saxo-guy@epic.com>",this.commitMessage=t.commitMessage||"He doesn't like George Michael! Boooo!",this.generateCommitHash="function"==typeof t.generateCommitHash?t.generateCommitHash:()=>{},this.branchesOrderFunction="function"==typeof t.compareBranchesOrder?t.compareBranchesOrder:void 0,this.branchLabelOnEveryCommit=i.booleanOptionOr(t.branchLabelOnEveryCommit,!1)}get isHorizontal(){return this.orientation===n.Orientation.Horizontal||this.orientation===n.Orientation.HorizontalReverse}get isVertical(){return!this.isHorizontal}get isReverse(){return this.orientation===n.Orientation.HorizontalReverse||this.orientation===n.Orientation.VerticalReverse}get shouldDisplayCommitMessage(){return!this.isHorizontal&&this.mode!==u.Mode.Compact}getUserApi(){return new y.GitgraphUserApi(this,()=>this.next())}subscribe(t){this.listeners.push(t);let e=!0;return()=>{if(!e)return;e=!1;const r=this.listeners.indexOf(t);this.listeners.splice(r,1)}}getRenderedData(){const t=this.computeRenderedCommits(),e=this.computeRenderedBranchesPaths(t),r=this.computeCommitMessagesX(e);return this.computeBranchesColor(t,e),{commits:t,branchesPaths:e,commitMessagesX:r}}createBranch(t){const e="HEAD";let r={gitgraph:this,name:"",parentCommitHash:this.refs.getCommit(e),style:this.template.branch,onGraphUpdate:()=>this.next()};if("string"==typeof t)r.name=t,r.parentCommitHash=this.refs.getCommit(e);else{const s=this.refs.getCommit(t.from?t.from.name:e)||(this.refs.hasCommit(t.from)?t.from:void 0);t.style=t.style||{},r=Object.assign({},r,t,{parentCommitHash:s,style:Object.assign({},r.style,t.style,{label:Object.assign({},r.style.label,t.style.label)})})}const s=new c.Branch(r);return this.branches.set(s.name,s),s}computeRenderedCommits(){const t=this.getBranches(),e=(()=>{const e=new Set(this.commits.reduce((e,{hash:r})=>t.has(r)?e:[...e,r],[])),r=this.commits.reduce((t,e)=>e.parents.length>1?[...t,...e.parents.slice(1).map(t=>this.commits.find(({hash:e})=>t===e))]:t,[]),s=new Set;return r.forEach(t=>{let r=t;for(;r&&e.has(r.hash);)s.add(r.hash),r=r.parents.length>0?this.commits.find(({hash:t})=>r.parents[0]===t):void 0}),s})(),r=this.commits.filter(({hash:r})=>t.has(r)||e.has(r)),s=r.map(e=>this.withBranches(t,e)),n=p.createGraphRows(this.mode,r),i=new g.BranchesOrder(s,this.template.colors,this.branchesOrderFunction);return s.map(t=>t.setRefs(this.refs)).map(t=>this.withPosition(n,i,t)).map(t=>t.withDefaultColor(this.getBranchDefaultColor(i,t.branchToDisplay))).map(t=>t.setTags(this.tags,t=>Object.assign({},this.tagStyles[t],this.template.tag),t=>this.tagRenders[t]))}computeRenderedBranchesPaths(t){return new b.BranchesPathsCalculator(t,this.branches,this.template.commit.spacing,this.isVertical,this.isReverse,()=>c.createDeletedBranch(this,this.template.branch,()=>this.next())).execute()}computeBranchesColor(t,e){const r=new g.BranchesOrder(t,this.template.colors,this.branchesOrderFunction);Array.from(e).forEach(([t])=>{t.computedColor=t.style.color||this.getBranchDefaultColor(r,t.name)})}computeCommitMessagesX(t){return Array.from(t).length*this.template.branch.spacing}withBranches(t,e){let r=Array.from((t.get(e.hash)||new Set).values());return 0===r.length&&(r=[c.DELETED_BRANCH_NAME]),e.setBranches(r)}getBranches(){const t=new Map,e=[];return this.refs.getAllNames().filter(t=>"HEAD"!==t).forEach(r=>{const s=this.refs.getCommit(r);for(s&&e.push(s);e.length>0;){const s=e.pop(),n=this.commits.find(({hash:t})=>t===s),i=t.get(s)||new Set;i.add(r),t.set(s,i),n&&n.parents&&n.parents.length>0&&e.push(n.parents[0])}}),t}withPosition(t,e,r){const s=t.getRowOf(r.hash),i=t.getMaxRow(),o=e.get(r.branchToDisplay);switch(this.orientation){default:return r.setPosition({x:this.initCommitOffsetX+this.template.branch.spacing*o,y:this.initCommitOffsetY+this.template.commit.spacing*(i-s)});case n.Orientation.VerticalReverse:return r.setPosition({x:this.initCommitOffsetX+this.template.branch.spacing*o,y:this.initCommitOffsetY+this.template.commit.spacing*s});case n.Orientation.Horizontal:return r.setPosition({x:this.initCommitOffsetX+this.template.commit.spacing*s,y:this.initCommitOffsetY+this.template.branch.spacing*o});case n.Orientation.HorizontalReverse:return r.setPosition({x:this.initCommitOffsetX+this.template.commit.spacing*(i-s),y:this.initCommitOffsetY+this.template.branch.spacing*o})}}getBranchDefaultColor(t,e){return t.getColorOf(e)}next(){this.nextTimeoutId&&window.clearTimeout(this.nextTimeoutId),this.nextTimeoutId=window.setTimeout(()=>{this.listeners.forEach(t=>t(this.getRenderedData()))},0)}}});r(_);var v=s(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GitgraphCore=_.GitgraphCore,e.Mode=u.Mode,e.GitgraphUserApi=y.GitgraphUserApi,e.BranchUserApi=l.BranchUserApi,e.Branch=c.Branch,e.Commit=h.Commit,e.Tag=a.Tag,e.Refs=f.Refs,e.MergeStyle=o.MergeStyle,e.TemplateName=o.TemplateName,e.templateExtend=o.templateExtend,e.Orientation=n.Orientation,e.toSvgPath=b.toSvgPath,e.arrowSvgPath=i.arrowSvgPath});r(v);var C=v.GitgraphCore,w=v.Mode,O=v.MergeStyle,A=v.TemplateName,V=v.templateExtend,M=v.Orientation,E=v.toSvgPath,S=v.arrowSvgPath,x="http://www.w3.org/2000/svg";function k(t){var e=document.createElementNS(x,"g");return t.children.forEach(function(t){return t&&e.appendChild(t)}),t.translate&&e.setAttribute("transform","translate("+t.translate.x+", "+t.translate.y+")"),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),t.onClick&&e.addEventListener("click",t.onClick),t.onMouseOver&&e.addEventListener("mouseover",t.onMouseOver),t.onMouseOut&&e.addEventListener("mouseout",t.onMouseOut),e}function D(t){var e=document.createElementNS(x,"text");return e.setAttribute("alignment-baseline","central"),e.setAttribute("dominant-baseline","central"),e.textContent=t.content,t.fill&&e.setAttribute("fill",t.fill),t.font&&e.setAttribute("style","font: "+t.font),t.anchor&&e.setAttribute("text-anchor",t.anchor),t.translate&&(e.setAttribute("x",t.translate.x.toString()),e.setAttribute("y",t.translate.y.toString())),t.onClick&&e.addEventListener("click",t.onClick),e}function j(t){var e=document.createElementNS(x,"path");return e.setAttribute("d",t.d),t.fill&&e.setAttribute("fill",t.fill),t.stroke&&e.setAttribute("stroke",t.stroke),t.strokeWidth&&e.setAttribute("stroke-width",t.strokeWidth.toString()),t.translate&&e.setAttribute("transform","translate("+t.translate.x+", "+t.translate.y+")"),e}function T(t){var e=document.createElementNS(x,"use");return e.setAttribute("href","#"+t),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+t),e}function P(t){var e=0;if(t){var r=t.getBoundingClientRect().height,s=window.getComputedStyle(t).marginTop||"0px";e=r+parseInt(s.replace("px",""),10)}return e}t.MergeStyle=O,t.Mode=w,t.Orientation=M,t.TemplateName=A,t.createGitgraph=function(t,e){var r,s,n,i={},o={},a=!1,h=0,l=null,c=document.createElementNS(x,"svg");n=Boolean(e&&e.responsive),new MutationObserver(function(){var t,e,l;a?(a=!1,t=Array.from(s.children),e=0,l=u.orientation===M.VerticalReverse?t:t.reverse(),o=l.reduce(function(t,r){var s=parseInt(r.getAttribute("transform").split(",")[1].slice(0,-1),10),n=r.getElementsByTagName("foreignObject")[0],i=n&&n.firstElementChild;return t[s]=s+e,e+=P(i),t},{}),d(r)):(u.isHorizontal||Object.keys(i).forEach(function(t){var e=i[t],r=e.branchLabel,s=e.tags,n=e.message,o=h;if(r){m(r,o);var a=r.getBBox().width+20;o+=a+10}s.forEach(function(t){m(t,o);var e=parseFloat(t.getAttribute("data-offset")||"0"),r=t.getBBox().width+20+e;o+=r+10}),n&&m(n,o)}),function(t){var e=c.getBBox(),r=e.height,s=e.width,n=u.isHorizontal?50:20,i=u.isHorizontal?50:35;t?(c.setAttribute("preserveAspectRatio","xMinYMin meet"),c.setAttribute("viewBox","0 0 "+(s+n)+" "+(r+i))):(c.setAttribute("width",(s+n).toString()),c.setAttribute("height",(r+i).toString()))}(n))}).observe(c,{attributes:!1,subtree:!0,childList:!0}),t.appendChild(c),e&&e.responsive&&t.setAttribute("style","display:inline-block; position: relative; width:100%; padding-bottom:100%; vertical-align:middle; overflow:hidden;");var u=new C(e);return u.subscribe(function(t){a=!0,d(t)}),u.getUserApi();function d(t){i={};var e=t.branchesPaths;h=t.commitMessagesX,r=t,s=function(t){return k({children:t.map(function(t){var r=v(t),s=r.x;return k({translate:{x:s,y:r.y},children:[_(t)].concat(e(t),[k({translate:{x:-s,y:0},children:[g(t)].concat(b(t),y(t))})])})})});function e(e){if(!u.template.arrow.size)return[null];var r=e.style.dot.size;return e.parents.map(function(s){var n=t.find(function(t){return t.hash===s});return n?k({translate:u.reverseArrow?{x:r+(n.x-e.x),y:r+(n.y-e.y)}:{x:r,y:r},children:[j({d:S(u,n,e),fill:u.template.arrow.color||""})]}):null})}}(t.commits),c.innerHTML="",c.appendChild(k({translate:{x:10,y:10},children:[p(e),s]}))}function m(t,e){var r=t.getAttribute("transform")||"translate(0, 0)";t.setAttribute("transform",r.replace(/translate\(([\d\.]+),/,"translate("+e+","))}function p(t){var e=u.template.commit.dot.size,r=u.template.branch.mergeStyle===O.Bezier;return k({children:Array.from(t).map(function(t){var s=t[0];return j({d:E(t[1].map(function(t){return t.map(v)}),r,u.isVertical),fill:"none",stroke:s.computedColor||"",strokeWidth:s.style.lineWidth,translate:{x:e,y:e}})})})}function g(t){if(!t.style.message.display)return null;var e;if(t.renderMessage)return f(e=k({children:[]})),e.appendChild(t.renderMessage(t)),A(t,e),e;var r=D({content:t.message,fill:t.style.message.color||"",font:t.style.message.font,onClick:t.onMessageClick});if(e=k({translate:{x:0,y:t.style.dot.size},children:[r]}),t.body){var s=function(t){var e=document.createElementNS(x,"foreignObject");e.setAttribute("width",t.width.toString()),t.translate&&(e.setAttribute("x",t.translate.x.toString()),e.setAttribute("y",t.translate.y.toString()));var r=document.createElement("p");return r.textContent=t.content,e.appendChild(r),e}({width:600,translate:{x:10,y:0},content:t.body});f(e),e.appendChild(s)}return A(t,e),e}function f(t){function e(t){if("foreignObject"===t.nodeName){var r=t.firstChild&&t.firstChild.parentElement;if(!r)return;r.setAttribute("height",P(r.firstElementChild).toString())}t.childNodes.forEach(e)}new MutationObserver(function(t){t.forEach(function(t){return e(t.target)})}).observe(t,{attributes:!1,subtree:!1,childList:!0})}function b(t){return Array.from(u.branches.values()).map(function(e){if(!e.style.label.display)return null;if(!u.branchLabelOnEveryCommit){var r=u.refs.getCommit(e.name);if(t.hash!==r)return null}if(t.branchToDisplay!==e.name)return null;var s,n=e.renderLabel?e.renderLabel(e):function(t,e){var r=function(t){var e=document.createElementNS(x,"rect");return e.setAttribute("width",t.width.toString()),e.setAttribute("height",t.height.toString()),t.borderRadius&&e.setAttribute("rx",t.borderRadius.toString()),t.fill&&e.setAttribute("fill",t.fill||"none"),t.stroke&&e.setAttribute("stroke",t.stroke),e}({width:0,height:0,borderRadius:t.style.label.borderRadius,stroke:t.style.label.strokeColor||e.style.color,fill:t.style.label.bgColor}),s=D({content:t.name,translate:{x:10,y:0},font:t.style.label.font,fill:t.style.label.color||e.style.color}),n=k({children:[r]});return new MutationObserver(function(){var t=s.getBBox(),e=t.height+10;r.setAttribute("width",(t.width+20).toString()),r.setAttribute("height",e.toString()),s.setAttribute("y",(e/2).toString())}).observe(n,{attributes:!1,subtree:!1,childList:!0}),n.appendChild(s),n}(e,t);return s=k(u.isVertical?{children:[n]}:{translate:{x:t.x,y:2*t.style.dot.size+10},children:[n]}),function(t,e){i[t.hashAbbrev]||V(t),i[t.hashAbbrev].branchLabel=e}(t,s),s})}function y(t){return t.tags?u.isHorizontal?[]:t.tags.map(function(e){var r=e.render?e.render(e.name,e.style):function(t){var e=j({d:"",fill:t.style.bgColor,stroke:t.style.strokeColor}),r=D({content:t.name,fill:t.style.color,font:t.style.font,translate:{x:0,y:0}}),s=k({children:[e]}),n=t.style.pointerWidth;return new MutationObserver(function(){var s=r.getBBox(),i=s.height,o=s.width;if(0!==i&&0!==o){var a=t.style.borderRadius,h=n+o+20,l=i+10,c=["M 0,0","L "+n+","+l/2,"V "+l/2,"Q "+n+","+l/2+" "+(n+a)+","+l/2,"H "+(h-a),"Q "+h+","+l/2+" "+h+","+(l/2-a),"V -"+(l/2-a),"Q "+h+",-"+l/2+" "+(h-a)+",-"+l/2,"H "+(n+a),"Q "+n+",-"+l/2+" "+n+",-"+l/2,"V -"+l/2,"z"].join(" ");e.setAttribute("d",c.toString()),r.setAttribute("x",(n+10).toString())}}).observe(s,{attributes:!1,subtree:!1,childList:!0}),s.appendChild(r),s}(e),s=k({translate:{x:0,y:t.style.dot.size},children:[r]});return s.setAttribute("data-offset",e.style.pointerWidth.toString()),function(t,e){i[t.hashAbbrev]||V(t),i[t.hashAbbrev].tags.push(e)}(t,s),s}):[]}function _(t){if(t.renderDot)return t.renderDot(t);var e=t.hash,r=function(t){var e=document.createElementNS(x,"circle");return e.setAttribute("cx",t.radius.toString()),e.setAttribute("cy",t.radius.toString()),e.setAttribute("r",t.radius.toString()),t.id&&e.setAttribute("id",t.id),t.fill&&e.setAttribute("fill",t.fill),e}({id:e,radius:t.style.dot.size,fill:t.style.dot.color||""}),s="clip-"+t.hash,n=document.createElementNS(x,"clipPath");n.setAttribute("id",s),n.appendChild(T(e));var i=T(e);i.setAttribute("clip-path","url(#"+s+")"),i.setAttribute("stroke",t.style.dot.strokeColor||""),i.setAttribute("stroke-width",(t.style.dot.strokeWidth?2*t.style.dot.strokeWidth:0).toString());var o,a,h=t.dotText?D({content:t.dotText,font:t.style.dot.font,anchor:"middle",translate:{x:t.style.dot.size,y:t.style.dot.size}}):null;return k({onClick:t.onClick,onMouseOver:function(){!function(t){if(c.firstChild&&(!u.isVertical||u.mode===w.Compact)&&(!u.isVertical||t.style.hasTooltipInCompactMode)){var e=t.renderTooltip?t.renderTooltip(t):function(t){var e=j({d:"",fill:"#EEE"}),r=D({translate:{x:20,y:0},content:t.hashAbbrev+" - "+t.subject,fill:"#333"}),s=2*t.style.dot.size,n=k({translate:{x:s,y:s/2},children:[e]});return new MutationObserver(function(){var t=10+r.getBBox().width+20,s=["M 0,0","L 10,10","V 20","Q 10,25 15,25","H "+(t-5),"Q "+t+",25 "+t+",20","V -20","Q "+t+",-25 "+(t-5)+",-25","H 15","Q 10,-25 10,-20","V -10","z"].join(" ");e.setAttribute("d",s.toString())}).observe(n,{attributes:!1,subtree:!1,childList:!0}),n.appendChild(r),n}(t);l=k({translate:v(t),children:[e]}),c.firstChild.appendChild(l)}}(t),t.onMouseOver()},onMouseOut:function(){l&&l.remove(),t.onMouseOut()},children:[(o=[r,n],a=document.createElementNS(x,"defs"),o.forEach(function(t){return a.appendChild(t)}),a),i,h]})}function v(t){var e=t.y;return{x:t.x,y:o[e]||e}}function A(t,e){i[t.hashAbbrev]||V(t),i[t.hashAbbrev].message=e}function V(t){i[t.hashAbbrev]={branchLabel:null,tags:[],message:null}}},t.templateExtend=V,Object.defineProperty(t,"__esModule",{value:!0})}(e)}}]);